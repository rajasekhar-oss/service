<div class="dashboard-container">
  <h2>Welcome, {{ currentUser?.name || 'Provider' }}</h2>

  <div class="dashboard-section">
    <div class="skills-head">
      <h3>My Listings</h3>
      <button class="add-btn" (click)="addSkill()">+ Add New Skill/Session</button>
    </div>
    <div *ngIf="mySkills.length === 0" class="empty-msg">
      No skills/services listed yet.
    </div>
    <div class="skills-list" *ngIf="mySkills.length">
      <div class="skill-card card" *ngFor="let skill of mySkills">
        <img [src]="skill.imageUrl" [alt]="skill.title" class="skill-thumb">
        <div class="skill-info">
          <div>
            <span [ngClass]="{
              'badge-service': skill.type === 'do',
              'badge-session': skill.type === 'teach'
            }" class="skill-type-badge">
              {{ skill.type === 'do' ? 'Service' : 'Session' }}
            </span>
            <span class="skill-title">{{ skill.title }}</span>
          </div>
          <div class="cat-price">
            <span class="cat">{{ skill.category }}</span>
            <span class="price">₹{{ skill.price }}</span>
          </div>
          <button class="edit-btn" (click)="editSkill(skill.id)">Edit</button>
        </div>
      </div>
    </div>
  </div>

  <div class="dashboard-section">
    <h3>Recent Bookings</h3>
    <div *ngIf="loading">Loading…</div>
    <div *ngIf="!loading && myBookings.length === 0" class="empty-msg">
      No bookings yet for your skills or sessions.
    </div>
    <div class="bookings-list" *ngIf="!loading && myBookings.length">
      <div class="booking-card card" *ngFor="let booking of myBookings">
        <div class="booking-meta">
          <span class="booking-date">{{ booking.date | date:'medium' }}</span>
          <span [ngClass]="{
            'status-confirmed': booking.status==='confirmed',
            'status-completed': booking.status==='completed',
            'status-pending': booking.status!=='confirmed' && booking.status!=='completed'
          }" class="booking-status">{{ booking.status | titlecase }}</span>
        </div>
        <div class="booking-detail">
          <div>
            <span class="seeker-name">
              {{ seekers[booking.seekerId].name || 'Seeker #' + booking.seekerId }}
            </span>
            booked skill #
            <span class="skill-id">{{ booking.skillId }}</span>
          </div>
          <button class="view-btn" (click)="goToBooking(booking.id)">
            Booking Details
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
